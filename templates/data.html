
<!-- |  {% extends "base.html" %}

  {% block content %}
  
  <div class="container-fluid">
      <form id="recommend-form">
          <div class="row">
              {% csrf_token %}
              {% for field in form %}
              <div class="form-group col-4">
                  <label class="col-12">{{ field.label }}</label>
                  <center>{{ field }}
              </div>
              {% endfor %}
              <div class = "col text-center">
                  <input type="submit" class="btn btn-primary" value="Recommend" />
              </div>
  
          </div>
      <form>
  </div>
  
  <hr />
  
  <div class="container-fluid">
      <table class="table table-striped table-sm" id="Recommend">
          <thead>
              <tr>
                  <th>title</th>
                  <th>year</th>
                  <th>image</th>
                  <th>actor1</th>
                  <th>actor2</th>
                  <th>actor3</th>
              </tr>
          </thead>
          <tbody>
          {% for re in recommend %}
          <tr>
              <td>{{re.title}}</td>
              <td>{{re.year}}</td>
              <td>{{re.image}}</td>
              <td>{{re.actor1}}</td>
              <td>{{re.actor2}}</td>
              <td>{{re.actor3}}</td>
          </tr>
          {% endfor %}
          </tbody>
      </table>
  
  </div>
  {% endblock content %}




</html> -->
 {% block javascript %}
<script>
    $(document).ready(function () {
        /*
            On submiting the form, send the POST ajax
            request to server and after successfull submission
            display the object.
        */
        $("#recommend-form").submit(function (e) {
            // preventing from page reload and default actions
            e.preventDefault();
            // serialize the data for sending the form data.
            var serializedData = $(this).serialize();
            // make POST ajax call
            $.ajax({
                type: 'POST',
                url: "{% url 'post' %}",
                data: serializedData,
                success: function (response) {
                    
                    // on successfull creating object
                    // 1. clear the form.
                    $("#recommend-form").trigger('reset');
                    // 2. focus to nickname input 
                    //$("#id_nick_name").focus();

                    // display the newly friend to table.
                    var instance = JSON.parse(response["instance"]);
                    var fields = instance[0]["fields"];
                    $("#my_friends tbody").prepend(
                        `<tr>
                        <td>${fields["acousticness"]||""}</td>
                        <td>${fields["danceability"]||""}</td>
                        <td>${fields["valence"]||""}</td>
                        <td>${fields["instrumentalness"]||""}</td>
                        <td>${fields["energy"]||""}</td>
                        <td>${fields["speechiness"]||""}</td>
                        <td>${fields["tempo"]||""}</td>
                        </tr>`
                    )
         
                },
                error: function (response) {
                    // alert the error if any error occured
                    alert(response["responseJSON"]["error"]);
                }
            })
        })

        /*
        On focus out on input nickname,
        call AJAX get request to check if the nickName
        already exists or not.
        */
        $("#id_nick_name").focusout(function (e) {
            e.preventDefault();
            // get the nickname
            var nick_name = $(this).val();
            // GET AJAX request
            $.ajax({
                type: 'GET',
                url: "{% url 'recommend' %}",
                data: {"nick_name": nick_name},
                success: function (response) {
                    // if not valid user, alert the user
                    if(!response["valid"]){
                        alert("You cannot create a friend with same nick name");
                        var nickName = $("#id_nick_name");
                        nickName.val("")
                        nickName.focus()
                    }
                },
                error: function (response) {
                    console.log(response)
                }
            })
        })
    })
</script>
{% endblock javascript %} 








{% extends 'layout.html' %}
{% load static %}

{% block content %}
  
  <div class="">
      <div id="#" class="flex-center flex-column">
        
        <h1>Movie Mining  Mine</h1>
        
        <a class="btn" href="{% url 'index' %}">Start Your Quiz</a>
      </div>
    </div>

  {% endblock content %}